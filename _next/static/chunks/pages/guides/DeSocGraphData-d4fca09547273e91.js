(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{8040:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/DeSocGraphData",function(){return n(8266)}])},250:function(e,s,n){"use strict";var l=n(5893);n(7294);let i={logo:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:"/FDD_logo_white.svg",width:24,height:24}),(0,l.jsx)("span",{style:{marginLeft:".4em",fontWeight:800},children:"FDD Data Hub"})]}),search:{placeholder:"Search..."},project:{link:"https://github.com/Fraud-Detection-and-Defense/"},chat:{link:"https://discord.gg/gitcoin"},docsRepositoryBase:"https://github.com/Fraud-Detection-and-Defense/",footer:{text:"Gitcoin"}};s.Z=i},8266:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return o.ZP}});var l,i=n(5893),t=n(6871),a=n(250);n(5513);var r=n(1151);n(5675);var o=n(1235);let c={filePath:"pages/guides/DeSocGraphData.mdx",route:"/guides/DeSocGraphData",frontMatter:{},pageMap:[{kind:"Meta",data:{index:"Introduction",downloads:"Downloads",tools:"Tools",guides:"Guides",other_resources:"Other Resources"}},{kind:"Folder",name:"downloads",route:"/downloads",children:[{kind:"MdxPage",name:"grant_rounds",route:"/downloads/grant_rounds"},{kind:"Meta",data:{grant_rounds:"Grant Rounds"}}]},{kind:"Folder",name:"guides",route:"/guides",children:[{kind:"MdxPage",name:"DeSocGraphData",route:"/guides/DeSocGraphData"},{kind:"Meta",data:{DeSocGraphData:"Desocgraphdata"}}]},{kind:"MdxPage",name:"guides",route:"/guides"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"other_resources",route:"/other_resources"}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Open GraphQL APIs for Querying DeSoc Data",position:{start:{line:1,column:3,offset:2},end:{line:1,column:44,offset:43}}}],position:{start:{line:1,column:1,offset:0},end:{line:1,column:44,offset:43}},value:"Open GraphQL APIs for Querying DeSoc Data"},{type:"heading",depth:2,children:[{type:"text",value:"Sites",position:{start:{line:3,column:4,offset:48},end:{line:3,column:9,offset:53}}}],position:{start:{line:3,column:1,offset:45},end:{line:3,column:9,offset:53}},value:"Sites"},{type:"heading",depth:2,children:[{type:"text",value:"Some sample queries to get you started",position:{start:{line:11,column:4,offset:435},end:{line:11,column:42,offset:473}}}],position:{start:{line:11,column:1,offset:432},end:{line:11,column:42,offset:473}},value:"Some sample queries to get you started"},{type:"heading",depth:4,children:[{type:"text",value:"Lens Protocol",position:{start:{line:15,column:6,offset:581},end:{line:15,column:19,offset:594}}}],position:{start:{line:15,column:1,offset:576},end:{line:15,column:19,offset:594}},value:"Lens Protocol"},{type:"heading",depth:4,children:[{type:"text",value:"POAP",position:{start:{line:38,column:7,offset:843},end:{line:38,column:11,offset:847}}}],position:{start:{line:38,column:1,offset:837},end:{line:38,column:11,offset:847}},value:"POAP"},{type:"heading",depth:4,children:[{type:"text",value:"Snapshot",position:{start:{line:58,column:6,offset:1033},end:{line:58,column:14,offset:1041}}}],position:{start:{line:58,column:1,offset:1028},end:{line:58,column:14,offset:1041}},value:"Snapshot"},{type:"heading",depth:2,children:[{type:"text",value:"Automating queries",position:{start:{line:83,column:4,offset:1263},end:{line:83,column:22,offset:1281}}}],position:{start:{line:83,column:1,offset:1260},end:{line:83,column:22,offset:1281}},value:"Automating queries"},{type:"heading",depth:4,children:[{type:"text",value:"Method 1: Using ",position:{start:{line:90,column:6,offset:1567},end:{line:90,column:22,offset:1583}}},{type:"inlineCode",value:"requests",position:{start:{line:90,column:22,offset:1583},end:{line:90,column:32,offset:1593}}}],position:{start:{line:90,column:1,offset:1562},end:{line:90,column:32,offset:1593}},value:"Method 1: Using requests"},{type:"heading",depth:4,children:[{type:"text",value:"Method 2: Using ",position:{start:{line:99,column:6,offset:1811},end:{line:99,column:22,offset:1827}}},{type:"inlineCode",value:"gql",position:{start:{line:99,column:22,offset:1827},end:{line:99,column:27,offset:1832}}}],position:{start:{line:99,column:1,offset:1806},end:{line:99,column:27,offset:1832}},value:"Method 2: Using gql"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:c.pageMap,route:c.route};let h="Open GraphQL APIs for Querying DeSoc Data";function d(e){let s=Object.assign({h1:"h1",h2:"h2",ul:"ul",li:"li",a:"a",p:"p",code:"code",h4:"h4",div:"div",pre:"pre",span:"span"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{children:"Open GraphQL APIs for Querying DeSoc Data"}),"\n",(0,i.jsx)(s.h2,{id:"sites",children:"Sites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["POAPs (xDAI only) via ",(0,i.jsx)(s.a,{href:"https://api.thegraph.com/subgraphs/name/poap-xyz/poap-xdai",children:"The Graph API"})]}),"\n",(0,i.jsxs)(s.li,{children:["Snapshot votes (all EVM chains) via ",(0,i.jsx)(s.a,{href:"https://hub.snapshot.org/graphql/",children:"Snapshot API"})]}),"\n",(0,i.jsxs)(s.li,{children:["NFT ownership (ETH Mainnet only) via ",(0,i.jsx)(s.a,{href:"https://api.zora.co/graphql",children:"Zora API"})]}),"\n",(0,i.jsxs)(s.li,{children:["Lens profiles via ",(0,i.jsx)(s.a,{href:"https://api.lens.dev/",children:"Lens API"})]}),"\n",(0,i.jsxs)(s.li,{children:["Proof of Humanity via ",(0,i.jsx)(s.a,{href:"https://api.poh.dev",children:"PoH API"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"some-sample-queries-to-get-you-started",children:"Some sample queries to get you started"}),"\n",(0,i.jsxs)(s.p,{children:["In each of the cases below, substitute the ",(0,i.jsx)(s.code,{children:"$WALLETS"})," field with a list of wallet addresses (0x...)"]}),"\n",(0,i.jsx)(s.h4,{id:"lens-protocol",children:"Lens Protocol"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query Profiles {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  profiles("})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    request: { "})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        ownedBy: [$WALLETS], "})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        limit: 50 "})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    items {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      name"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      ownedBy"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      stats {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        totalFollowers"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        totalFollowing"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.h4,{id:"poap",children:"POAP"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query POAPs {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  accounts("})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    where: {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      id_in: [$WALLETS]"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    tokensOwned"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    tokens (first: 1000) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      event {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.h4,{id:"snapshot",children:"Snapshot"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query Votes {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  votes ("})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    first: 10000"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    skip: 0"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    where: {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      voter_in: [$WALLETS]"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ) {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    voter"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    created"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    proposal {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    choice"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    space {"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      id"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.h2,{id:"automating-queries",children:"Automating queries"}),"\n",(0,i.jsx)(s.p,{children:"Once you've configured your queries, here are some simple Python scripts for automating requests.\nNote: these scripts are fine for ad hoc analysis, not for building applications."}),"\n",(0,i.jsxs)(s.p,{children:["You'll need to provide values for ",(0,i.jsx)(s.code,{children:"my_api_url"}),", ",(0,i.jsx)(s.code,{children:"my_graphql_docstring"})," and ",(0,i.jsx)(s.code,{children:"my_list_of_wallets"}),"."]}),"\n",(0,i.jsxs)(s.h4,{id:"method-1-using-requests",children:["Method 1: Using ",(0,i.jsx)(s.code,{children:"requests"})]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'str_list = ", ".join(f\'"{w}"\' for w in my_list_of_wallets)'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'query = my_graphql_docstring.replace("$WALLETS", str_list)'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'r = requests.post(my_api_url, json={"query": query})'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"json_data = json.loads(r.text)"})})]})})}),"\n",(0,i.jsxs)(s.h4,{id:"method-2-using-gql",children:["Method 2: Using ",(0,i.jsx)(s.code,{children:"gql"})]}),"\n",(0,i.jsx)(s.p,{children:"This approach is better for more complex tasking and uses a Python GraphQL client (gql3)."}),"\n",(0,i.jsxs)(s.p,{children:["Get the gql package ",(0,i.jsx)(s.a,{href:"https://gql.readthedocs.io/en/stable/",children:"here"}),"."]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"from gql import gql, Client"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"from gql.transport.requests import RequestsHTTPTransport"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sample_transport=RequestsHTTPTransport("})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    url=my_api_url,"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    verify=True,"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    retries=3,"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"client = Client("})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    transport=sample_transport"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'str_list = ", ".join(f\'"{w}"\' for w in my_list_of_wallets)'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'query = my_graphql_docstring.replace("$WALLETS", str_list)'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"q = gql(my_graphql_docstring)"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"r = client.execute(q)"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"json_data = json.loads(r.text)"})})]})})})]})}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}c.title="string"==typeof h&&h||"Desocgraphdata";let x=e=>(0,i.jsx)(t.mK.Provider,{value:e,children:(0,i.jsx)(p,{})});(l=globalThis).__nextra_pageContext__||(l.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/guides/DeSocGraphData"]={Content:x,pageOpts:c,themeConfig:a.Z}}},function(e){e.O(0,[774,523,888,179],function(){return e(e.s=8040)}),_N_E=e.O()}]);